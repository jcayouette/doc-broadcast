<!doctype html>
<html lang="en">

<!-- head -->
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>Inventorying vCenter/vSphere ESXi Hosts with {susemgr}</title>
    <meta name="description" content="This site generates SUSE documentation using jekyll, asciidoc, travis and github.">
    <meta name="author" content="Your name goes here">
    <meta name="copyright" content="Maybe consider a Creative Commons license">

    <!-- Stylesheets -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
    <script src="https://use.fontawesome.com/abbdb82656.js"></script>

    <link rel="stylesheet" href="assets/css/custom.css">
    <link rel="stylesheet" href="assets/css/coderay.css">
    <link rel="stylesheet" href="assets/css/asciidoctor.css">

    <div class="content"><nav class="navbar navbar-toggleable-md navbar-light" style="background-color: #EDEDED;">
    <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <a class="navbar-brand" href="#">SUSE Live Documentation (ALPHA)</a>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto">
            <li class="nav-item active">
                <a class="nav-link" href="https://jcayouette.github.io/suse-publisher/index.html">Home <span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#">Link</a>
            </li>
            <li class="nav-item">
                <a class="nav-link disabled" href="#">Disabled</a>
            </li>
        </ul>
        <div id="navigation">
<input type="text" id="search-box" />
</div>
          <!--
        <form class="form-inline my-2 my-lg-0">
            <input class="form-control mr-sm-2" type="text" placeholder="Search" id="search-box">

            <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button> -->
        </form>
    </div>
</nav>
</div>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Arvo|Bitter|Copse|Cutive|Lora:700|Sanchez|Scope+One|Slabo+27px|Trocchi|Vesper+Libre" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Barlow" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">


</head>


<body class="landing-page">
<!-- Top most navbar -->


<!-- Page Content -->
<div class="container">
    <div class="post-header">
    <h1 class="post-title-main">Inventorying vCenter/vSphere ESXi Hosts with {susemgr}</h1>
</div>
<div id="search-box">
  <!-- SearchBox widget will appear here -->
</div>

<div id="hits">
  <!-- Hits widget will appear here -->
</div>

<script>
  const search = instantsearch(options);

  // initialize SearchBox
  search.addWidget(
    instantsearch.widgets.searchBox({
      container: '#search-box',
      placeholder: 'Search for products'
    })
  );

  // initialize hits widget
  search.addWidget(
    instantsearch.widgets.hits({
      container: '#hits'
    })
  );

  search.start();
</script>

<!-- If this does not work place post-content back in div and remove article -->
<div class="post-content">
    <!-- HACK enough for the demo lol -->
    

    
      <a target="_blank" href="https://github.com/jcayouette/example-manager-docs/edit/master/docs/manager-docs/manager32/advanced_topics_adding_a_vmware_esxi_host_manager.adoc" class="btn btn-primary" role="button"> Edit me</a>
    

    <!-- page content -->
    <div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#introduction">1. Introduction</a></li>
<li><a href="#requirements">2. Requirements</a></li>
<li><a href="#permissions_and_roles_overview">3. Permissions and Roles Overview</a></li>
<li><a href="#adding_new_users_and_assigning_roles">4. Adding New Users and Assigning Roles</a></li>
<li><a href="#inventorying_vcenter_vsphere_esxi_hosts">5. Inventorying vCenter/vSphere ESXi Hosts</a></li>
</ul>
</div>
<div class="sect1">
<h2 id="introduction">1. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Foreign virtual hosts (such as vCenter and vSphere ESXi) can be inventoried using the <span class="menuseq"><b class="menu">Virtual Host Manager</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">]
.
From the vSphere Client you can define roles and permissions for vCenter and vSphere ESXi users allowing vSphere objects and resources to be imported and inventoried by {susemgr}
.
Objects and resources are then displayed as foreign hosts on the {susemgr}menu:Systems[Virtual Systems</b></span>
 page.</p>
</div>
<div class="paragraph">
<p>The following sections will guide you through:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Requirements</p>
</li>
<li>
<p>Overview of permissions and roles</p>
</li>
<li>
<p>Adding vCenter and vSphere ESXi hosts to SUSE Manager</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="requirements">2. Requirements</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following table displays the default API communication port and required access rights for inventorying objects and resources.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Ports / Permissions</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">443</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default port that SUSE Manager uses to access the ESXi API for obtaining infrastructure data</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">read-only</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All vCenter/ESXi objects and resources that should be inventoried by the Virtual Host Manager should be at least assigned the <em>read-only</em> role.
Mark objects and resources with <em>no-access</em> to exclude them from the inventory.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="permissions_and_roles_overview">3. Permissions and Roles Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following section will guide you through assigning user permissions and roles in vCenter/ESXi.</p>
</div>
<div class="paragraph">
<p>A user is someone who has been authorized access to an ESXi host.
The Virtual Host Manager (located on the SUSE Manager server) will inventory ESXi data defined by assigned roles and permissions on a user account.</p>
</div>
<div class="paragraph">
<p>For example: The user John has been assigned the <em>read-only</em> access role to all servers and datacenters in his company with one exception.
Johns account has been assigned the <em>no-access</em> role on the company&#8217;s <em>Financial Database server </em>.
You decide to use Johns user account and add the ESXi host to SUSE Manager.
During the inventory the<em>
                Financial Database server</em> will be excluded.</p>
</div>
<div class="paragraph">
<p>Keep user access roles in mind when planning to add ESXi hosts to SUSE manager.
It is important to understand that SUSE Manager will not inventory any objects or resources assigned with the no-access role on any user account.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">User Roles/Permissions</div>
<div class="paragraph">
<p>When planning to add new ESXi hosts to SUSE Manager, ask yourself the following question:</p>
</div>
<div class="paragraph">
<p><em>Have users assigned to a host been provided with the required roles and
                    permissions for objects and resources that should be inventoried by SUSE
                    Manager?</em></p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="adding_new_users_and_assigning_roles">4. Adding New Users and Assigning Roles</h2>
<div class="sectionbody">
<div class="paragraph">
<p>See the official vSphere documentation on adding new users and assigning roles.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://pubs.vmware.com/vsphere-50/index.jsp#com.vmware.vsphere.security.doc_50/GUID-D7AEC653-EBC8-4573-B990-D8E58742F8ED.html">Authentication and User Management</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="inventorying_vcenter_vsphere_esxi_hosts">5. Inventorying vCenter/vSphere ESXi Hosts</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following procedure will guide you through inventorying a VSphere ESXi host with {susemgr}
.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>From the {susemgr}{webui} select <span class="menuseq"><b class="menu">Systems</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">] and then menu:Virtual Host Managers[</b></span> from the left navigation bar.</p>
</li>
<li>
<p>From the upper right corner of the <span class="menuseq"><b class="menu">Virtual Host Managers</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">] page select menu:Add VMware-based Virtual Host Manager[</b></span> .</p>
</li>
<li>
<p>From the <b class="menuref">Add a VMware-based Virtual Host Manager</b> page fill the following fields with your ESXi host data:</p>
<div class="ulist">
<ul>
<li>
<p>Label: Custom name for your Virtual Host Manager</p>
</li>
<li>
<p>Hostname: FQDN or host IP address</p>
</li>
<li>
<p>Port: Default ESXi API port</p>
</li>
<li>
<p>Username: ESXi user</p>
<div class="paragraph">
<p>IMPORTANT:
Remember that only objects and resources which match a users defined role will be inventoried.
Set the users role on objects and resources you want inventoried to <em>read-only</em></p>
</div>
</li>
<li>
<p>Password: ESXi users password</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>image::systems_virtual_host_managers_vmware.png[]</p>
</div>
</li>
<li>
<p>Click the <b class="menuref">Add Virtual Host Manager</b> button.</p>
</li>
<li>
<p>From the <b class="menuref">Virtual Host Managers</b> page select the newly added Virtual Host manager.</p>
</li>
<li>
<p>From the Virtual Host Managers <span class="menuseq"><b class="menu">Properties</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">] page select menu:Refresh data from this Virtual Host Manager.[</b></span></p>
<div class="paragraph">
<p>IMPORTANT:
If you do not refresh the data from a new Virtual Host Manager, host data will not be inventoried and therefore will not be displayed under <span class="menuseq"><b class="menu">Systems</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Virtual Systems</b></span>
.</p>
</div>
</li>
<li>
<p>View inventoried ESXi host objects and resources by selecting <span class="menuseq"><b class="menu">Systems</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Virtual Systems</b></span> .</p>
</li>
</ol>
</div>
</div>
</div>


</div>
<!-- Including InstantSearch.js library and styling -->
<script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch.min.js"></script>
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch.min.css">
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch-theme-algolia.min.css">

<script>
// Instanciating InstantSearch.js with Algolia credentials
const search = instantsearch({
  appId: 'WNURXD2O78',
  indexName: 'suse-publisher',
  apiKey: '761b121f117dc5882bfa9e6b1a7abd88'
});

// Adding searchbar and results widgets
search.addWidget(
  instantsearch.widgets.searchBox({
    container: '#search-box',
    placeholder: 'Search in documents...',
    poweredBy: true // This is required if you're on the free Community plan
  })
);
search.addWidget(
  instantsearch.widgets.hits({
    container: '#search-hits'
  })
);

// Starting the search
search.start();
</script>


</div>


<!-- Footer -->

<footer class="row">

</footer>

<!-- <script src="js/vendor/jquery.js"></script>
<script src="js/foundation.min.js"></script>
<script>
    $(document).foundation();
    var doc = document.documentElement;
    doc.setAttribute('data-useragent', navigator.userAgent);
</script>-->
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script>
<!-- Including InstantSearch.js library and styling -->
<script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch.min.js"></script>
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch.min.css">
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch-theme-algolia.min.css">

<script>
// Instanciating InstantSearch.js with Algolia credentials
const search = instantsearch({
  appId: 'WNURXD2O78',
  indexName: 'suse-publisher',
  apiKey: '761b121f117dc5882bfa9e6b1a7abd88'
});

// Adding searchbar and results widgets
search.addWidget(
  instantsearch.widgets.searchBox({
    container: '#search-box',
    placeholder: 'Search in documents...',
    poweredBy: true // This is required if you're on the free Community plan
  })
);
search.addWidget(
  instantsearch.widgets.hits({
    container: '#search-hits'
  })
);

// Starting the search
search.start();
</script>

</body>
</html>
